<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Bootloader Linker Configurations | Microchip MPLAB Harmony 3 Bootloader Library help</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="Bootloader Linker Configurations" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 Bootloader Library package" /> <meta property="og:description" content="Harmony 3 Bootloader Library package" /> <link rel="canonical" href="../../../templates/mips/docs/mips_bootloader_linker_config.html" /> <meta property="og:url" content="../../../templates/mips/docs/mips_bootloader_linker_config.html" /> <meta property="og:site_name" content="Microchip MPLAB Harmony 3 Bootloader Library help" /> <script type="application/ld+json"> {"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"@type":"WebPage","headline":"Bootloader Linker Configurations","url":"../../../templates/mips/docs/mips_bootloader_linker_config.html","description":"Harmony 3 Bootloader Library package","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../index.html" class="nav-list-link">Bootloader Library Help</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../templates/src/optimized/docs/uart/readme.html" class="nav-list-link">UART Bootloader</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/uart/uart_bootloader_how_library_works.html" class="nav-list-link">How The Library Works</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/uart/uart_bootloader_system_execution_flow.html" class="nav-list-link">Bootloader System Execution Flow</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/uart/uart_bootloader_configurations.html" class="nav-list-link">Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/uart/uart_application_configurations.html" class="nav-list-link">Application Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/uart/uart_bootloader_library_interface.html" class="nav-list-link">Library Interface</a> </li><li class="nav-list-item "> <a href="../../../tools/docs/readme_btl_host.html" class="nav-list-link">Tools Help</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/uart/uart_debugging.html" class="nav-list-link">Debugging Help</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../templates/src/optimized/docs/i2c/readme.html" class="nav-list-link">I2C Bootloader</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/i2c/i2c_bootloader_how_library_works.html" class="nav-list-link">How The Library Works</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/i2c/i2c_bootloader_system_execution_flow.html" class="nav-list-link">Bootloader System Execution Flow</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/i2c/i2c_bootloader_configurations.html" class="nav-list-link">Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/i2c/i2c_application_configurations.html" class="nav-list-link">Application Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/i2c/i2c_bootloader_library_interface.html" class="nav-list-link">Library Interface</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/i2c/i2c_bootloader_tools_help.html" class="nav-list-link">Tools Help</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/i2c/i2c_debugging.html" class="nav-list-link">Debugging Help</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../templates/src/optimized/docs/can/readme.html" class="nav-list-link">CAN Bootloader</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/can/can_bootloader_how_library_works.html" class="nav-list-link">How The Library Works</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/can/can_bootloader_system_execution_flow.html" class="nav-list-link">Bootloader System Execution Flow</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/can/can_bootloader_configurations.html" class="nav-list-link">Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/can/can_application_configurations.html" class="nav-list-link">Application Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/can/can_bootloader_library_interface.html" class="nav-list-link">Library Interface</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/can/can_bootloader_tools_help.html" class="nav-list-link">Tools Help</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/can/can_debugging.html" class="nav-list-link">Debugging Help</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../templates/src/optimized/docs/serial_memory/readme.html" class="nav-list-link">Serial Memory Bootloader</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/serial_memory/serial_bootloader_how_library_works.html" class="nav-list-link">How The Library Works</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/serial_memory/serial_bootloader_execution_flow.html" class="nav-list-link">Bootloader Execution Flow</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/serial_memory/serial_bootloader_configurations.html" class="nav-list-link">Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/serial_memory/serial_application_configurations.html" class="nav-list-link">Application Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/serial_memory/serial_bootloader_library_interface.html" class="nav-list-link">Library Interface</a> </li><li class="nav-list-item "> <a href="../../../templates/src/optimized/docs/serial_memory/serial_debugging.html" class="nav-list-link">Debugging Help</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../templates/src/unified/docs/usb/readme.html" class="nav-list-link">USB Device HID Bootloader</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../templates/src/unified/docs/usb/usb_bootloader_how_library_works.html" class="nav-list-link">How The Library Works</a> </li><li class="nav-list-item "> <a href="../../../templates/src/unified/docs/usb/usb_bootloader_system_execution_flow.html" class="nav-list-link">Bootloader System Execution Flow</a> </li><li class="nav-list-item "> <a href="../../../templates/src/unified/docs/usb/usb_bootloader_configurations.html" class="nav-list-link">Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/unified/docs/usb/usb_application_configurations.html" class="nav-list-link">Application Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/unified/docs/usb/usb_bootloader_library_interface.html" class="nav-list-link">Library Interface</a> </li><li class="nav-list-item "> <a href="../../../tools/docs/readme_UnifiedHost_usb_device_hid.html" class="nav-list-link">Tools Help</a> </li><li class="nav-list-item "> <a href="../../../templates/src/unified/docs/usb/usb_debugging.html" class="nav-list-link">Debugging Help</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../templates/src/unified/docs/udp/readme.html" class="nav-list-link">UDP Bootloader</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../templates/src/unified/docs/udp/udp_bootloader_how_library_works.html" class="nav-list-link">How The Library Works</a> </li><li class="nav-list-item "> <a href="../../../templates/src/unified/docs/udp/udp_bootloader_system_execution_flow.html" class="nav-list-link">Bootloader System Execution Flow</a> </li><li class="nav-list-item "> <a href="../../../templates/src/unified/docs/udp/udp_bootloader_configurations.html" class="nav-list-link">Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/unified/docs/udp/udp_application_configurations.html" class="nav-list-link">Application Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/unified/docs/udp/udp_bootloader_library_interface.html" class="nav-list-link">Library Interface</a> </li><li class="nav-list-item "> <a href="../../../tools/docs/readme_UnifiedHost_udp.html" class="nav-list-link">Tools Help</a> </li><li class="nav-list-item "> <a href="../../../templates/src/unified/docs/udp/udp_debugging.html" class="nav-list-link">Debugging Help</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../templates/src/fs/docs/readme.html" class="nav-list-link">File System Bootloader</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../templates/src/fs/docs/fs_bootloader_how_library_works.html" class="nav-list-link">How The Library Works</a> </li><li class="nav-list-item "> <a href="../../../templates/src/fs/docs/fs_bootloader_system_execution_flow.html" class="nav-list-link">Bootloader System Execution Flow</a> </li><li class="nav-list-item "> <a href="../../../templates/src/fs/docs/fs_bootloader_configurations_usb.html" class="nav-list-link">USB Host MSD Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/fs/docs/fs_bootloader_configurations_sdcard.html" class="nav-list-link">SD Card Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/fs/docs/fs_bootloader_configurations_serial.html" class="nav-list-link">Serial Memory Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/fs/docs/fs_application_configurations.html" class="nav-list-link">Application Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/src/fs/docs/fs_bootloader_library_interface.html" class="nav-list-link">Library Interface</a> </li><li class="nav-list-item "> <a href="../../../templates/src/fs/docs/fs_debugging.html" class="nav-list-link">Debugging Help</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="../../../apps/readme.html" class="nav-list-link">Bootloader Applications Help</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../templates/docs/appendix.html" class="nav-list-link">Appendix</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../templates/arm/docs/arm_bootloader_memory_layout.html" class="nav-list-link">Bootloader Memory Layout For CORTEX-M Based MCUs</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../templates/arm/docs/arm_bootloader_memory_layout_basic.html" class="nav-list-link">Basic Memory layout</a> </li><li class="nav-list-item "> <a href="../../../templates/arm/docs/arm_bootloader_memory_layout_fail_safe_update.html" class="nav-list-link">Fail Safe Update Memory layout</a> </li><li class="nav-list-item "> <a href="../../../templates/arm/docs/arm_bootloader_memory_layout_live_update.html" class="nav-list-link">Live Update Memory layout</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../templates/mips/docs/mips_bootloader_memory_layout.html" class="nav-list-link">Bootloader Memory Layout For MIPS Based MCUs</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../templates/mips/docs/mips_bootloader_memory_layout_basic.html" class="nav-list-link">Basic Memory layout</a> </li><li class="nav-list-item "> <a href="../../../templates/mips/docs/mips_bootloader_memory_layout_fail_safe_update.html" class="nav-list-link">Fail Safe Update Memory layout</a> </li><li class="nav-list-item "> <a href="../../../templates/mips/docs/mips_bootloader_memory_layout_live_update.html" class="nav-list-link">Live Update Memory layout</a> </li></ul></li><li class="nav-list-item "><a href="../../../templates/docs/bootloader_sizing_and_considerations.html" class="nav-list-link">Bootloader Sizing And Considerations</a></li><li class="nav-list-item "><a href="../../../templates/docs/bootloader_trigger_methods.html" class="nav-list-link">Bootloader Trigger Methods</a></li><li class="nav-list-item "><a href="../../../templates/src/optimized/docs/can/can_bootloader_firmware_update_execution_flow.html" class="nav-list-link">CAN Bootloader Firmware Update Execution Flow</a></li><li class="nav-list-item "><a href="../../../templates/src/optimized/docs/can/can_bootloader_protocol.html" class="nav-list-link">CAN Bootloader Protocol</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../templates/arm/docs/arm_configurations.html" class="nav-list-link">Configurations for CORTEX-M based MCUs</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../templates/arm/docs/arm_bootloader_linker_config.html" class="nav-list-link">Bootloader Linker Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/arm/docs/arm_application_project_config.html" class="nav-list-link">Application Project Configurations</a> </li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../templates/mips/docs/mips_configurations.html" class="nav-list-link">Configurations for MIPS based MCUs</a><ul class="nav-list"><li class="nav-list-item active"> <a href="../../../templates/mips/docs/mips_bootloader_linker_config.html" class="nav-list-link active">Bootloader Linker Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/mips/docs/mips_application_linker_config.html" class="nav-list-link">Application Linker Configurations</a> </li><li class="nav-list-item "> <a href="../../../templates/mips/docs/mips_application_project_config.html" class="nav-list-link">Application Project Configurations</a> </li></ul></li><li class="nav-list-item "><a href="../../../templates/docs/debugging_bootloader_and_application.html" class="nav-list-link">Debugging Bootloader And Application</a></li><li class="nav-list-item "><a href="../../../templates/arm/docs/arm_bootloader_debugging.html" class="nav-list-link">Debugging Bootloaders For CORTEX-M based MCUs</a></li><li class="nav-list-item "><a href="../../../templates/src/fs/docs/fs_bootloader_firmware_update_execution_flow.html" class="nav-list-link">File System Bootloader Firmware Update Execution Flow</a></li><li class="nav-list-item "><a href="../../../templates/src/optimized/docs/i2c/i2c_bootloader_firmware_update_execution_flow.html" class="nav-list-link">I2C Bootloader Firmware Update Execution Flow</a></li><li class="nav-list-item "><a href="../../../templates/src/optimized/docs/i2c/i2c_bootloader_protocol.html" class="nav-list-link">I2C Bootloader Protocol</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../tools/readme.html" class="nav-list-link">Tools Help</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../tools/docs/readme_btl_app_merge_bin.html" class="nav-list-link">Bootloader and Application binary merge script Help</a> </li><li class="nav-list-item "> <a href="../../../tools/docs/readme_btl_bin_to_c_array.html" class="nav-list-link">Binary to C Array script help</a> </li></ul></li><li class="nav-list-item "><a href="../../../templates/src/optimized/docs/uart/uart_bootloader_firmware_update_execution_flow.html" class="nav-list-link">UART Bootloader Firmware Update Execution Flow</a></li><li class="nav-list-item "><a href="../../../templates/src/optimized/docs/uart/uart_bootloader_protocol.html" class="nav-list-link">UART Bootloader Protocol</a></li><li class="nav-list-item "><a href="../../../templates/src/unified/docs/udp/udp_bootloader_firmware_update_execution_flow.html" class="nav-list-link">UDP Bootloader Firmware Update Execution Flow</a></li><li class="nav-list-item "><a href="../../../templates/src/unified/docs/udp/udp_bootloader_protocol.html" class="nav-list-link">UDP Bootloader Protocol</a></li><li class="nav-list-item "><a href="../../../templates/src/unified/docs/usb/usb_bootloader_firmware_update_execution_flow.html" class="nav-list-link">USB Device HID Bootloader Firmware Update Execution Flow</a></li><li class="nav-list-item "><a href="../../../templates/src/unified/docs/usb/usb_bootloader_protocol.html" class="nav-list-link">USB Device HID Bootloader Protocol</a></li></ul></li><li class="nav-list-item"><a href="../../../release_notes.html" class="nav-list-link">Release notes</a></li><li class="nav-list-item"><a href="../../../mplab_harmony_license.html" class="nav-list-link">License</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Microchip MPLAB Harmony 3 Bootloader Library help" aria-label="Search Microchip MPLAB Harmony 3 Bootloader Library help" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../../templates/docs/appendix.html">Appendix</a></li> <li class="breadcrumb-nav-list-item"><a href="../../../templates/mips/docs/mips_configurations.html">Configurations for MIPS based MCUs</a></li> <li class="breadcrumb-nav-list-item"><span>Bootloader Linker Configurations</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <p><a href="https://www.microchip.com"><img src="https://www.microchip.com/ResourcePackages/Microchip/assets/dist/images/logo.png" alt="MCHP" /></a></p> <h1 id="linker-configurations-for-the-bootloader"> <a href="#linker-configurations-for-the-bootloader" aria-labelledby="linker-configurations-for-the-bootloader" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Linker configurations for the Bootloader </h1> <h2 id="bootloader-placement-for-various-pic32m-product-families"> <a href="#bootloader-placement-for-various-pic32m-product-families" aria-labelledby="bootloader-placement-for-various-pic32m-product-families" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Bootloader placement for various PIC32M product families </h2> <p>The bootloader is placed in <strong>Boot Flash Memory (BFM)</strong> or <strong>Program Flash Memory (PFM)</strong> based on the size of the bootloader and available Boot flash memory on the device.</p> <ul> <li> <p>If the bootloader fits into the available BFM, it is placed in BFM. The user application can use the complete area of the program Flash memory.</p> </li> <li> <p>If the bootloader does not fit into the available BFM, it is placed in PFM. The user application can use the remaining area of the program Flash memory.</p> </li> <li> <p>The following table shows the available Boot Flash memory and the placement of different bootloaders by product family.</p> <p align="center"> <img src="../../docs/images/bootloader_placement.png" /> </p> </li> </ul> <h2 id="bootloader-linker-script-settings"> <a href="#bootloader-linker-script-settings" aria-labelledby="bootloader-linker-script-settings" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Bootloader linker script settings </h2> <ul> <li> <p>Bootloader library uses a custom linker script which is <strong>generated through MHC</strong></p> </li> <li> <p>The values populated in the linker script are based on the Bootloader component MHC configurations</p> </li> <li> <p>The vector address of a given interrupt is calculated using Exception Base (EBASE) CPU register and the _ebase_address should be aligned to 4KB boundary</p> </li> <li> <p><strong>Note: The below sections provides overview of changes done to bootloader linker scripts when compared to default linker script. The address location and size may vary based on the specific device used</strong></p> </li> </ul> <h3 id="for-bootloaders-placed-in-boot-flash-memory-pic32mz-and-pic32mk-devices"> <a href="#for-bootloaders-placed-in-boot-flash-memory-pic32mz-and-pic32mk-devices" aria-labelledby="for-bootloaders-placed-in-boot-flash-memory-pic32mz-and-pic32mk-devices" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> For Bootloaders placed in Boot Flash Memory (PIC32MZ and PIC32MK Devices) </h3> <ul> <li> <p>The bootloader start address by default will be start of <strong>Boot flash memory (0xBFC00000)</strong>. This is the default startup location for all PIC32M devices</p> </li> <li> <p>The Initial 4KB from Bootloader start address are used by Reset Handler and cache_init section followed by rest of bootloader code.</p> </li> <li> <p>Length of the bootloader is calculated based on the bootloader being added to MHC</p> </li> <li> <p>XC32 Compiler calculates offset from the EBASE address and initializes the value of interrupt vector offset (OFFx) register. The offset register is combined with EBASE register using a bitwise OR operator to obtain the interrupt vector address that the CPU will jump to when the corresponding interrupt occurs.</p> </li> <li>If the EBASE address is aligned to 4KB, then all the interrupt vectors must be located within the 4KB from base address. <ul> <li><strong>Example:</strong> When _ebase_address is set to <strong>0x9FC01000</strong> and interrupts vectors are not located withing the 4KB boundary from the ebase address <strong>(OFFx &gt; 0x1000)</strong>, then the bitwise OR operator may not provide correct interrupt vector address.</li> </ul> </li> <li>To provide maximum flexibility in placement of interrupt vectors: <ul> <li> <p>The <strong>_ebase_address</strong> is placed at start of Boot flash memory <strong>(0x9FC00000)</strong></p> </li> <li> <p>Offsets of exceptions and vector sections are updated to place them after the device startup code. With this the interrupt handlers can be located anywhere in the Boot Flash memory.</p> </li> </ul> </li> <li>Generated linker scripts as explained above is shown here <strong>as an example</strong> <ul> <li> <p>Bootloader length <strong>&lt;bootloader_length&gt;</strong> in the below snippet is auto generated based on the bootloader component added in MHC</p> </li> <li> <p><strong>Note: Cache related sections are not applicable for PIC32MK Devices</strong></p> </li> </ul> </li> </ul> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PROVIDE</span><span class="p">(</span><span class="n">_vector_spacing</span> <span class="o">=</span> <span class="mh">0x0001</span><span class="p">);</span>
<span class="n">PROVIDE</span><span class="p">(</span><span class="n">_ebase_address</span> <span class="o">=</span> <span class="mh">0x9FC00000</span><span class="p">);</span>

<span class="cm">/* Place the vector table and other exceptions after the device reset and
 * cache init code.
 */</span>
<span class="n">PROVIDE</span><span class="p">(</span><span class="n">_ebase_vector_offsets</span> <span class="o">=</span> <span class="mh">0x1000</span><span class="p">);</span>

<span class="n">_RESET_ADDR</span>                    <span class="o">=</span> <span class="mh">0xBFC00000</span><span class="p">;</span>
<span class="n">_BEV_EXCPT_ADDR</span>                <span class="o">=</span> <span class="mh">0xBFC00380</span><span class="p">;</span>
<span class="n">_DBG_EXCPT_ADDR</span>                <span class="o">=</span> <span class="mh">0xBFC00480</span><span class="p">;</span>
<span class="n">_SIMPLE_TLB_REFILL_EXCPT_ADDR</span>  <span class="o">=</span> <span class="n">_ebase_address</span> <span class="o">+</span> <span class="n">_ebase_vector_offsets</span> <span class="o">+</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">_CACHE_ERR_EXCPT_ADDR</span>          <span class="o">=</span> <span class="n">_ebase_address</span> <span class="o">+</span> <span class="n">_ebase_vector_offsets</span> <span class="o">+</span> <span class="mh">0x100</span><span class="p">;</span>
<span class="n">_GEN_EXCPT_ADDR</span>                <span class="o">=</span> <span class="n">_ebase_address</span> <span class="o">+</span> <span class="n">_ebase_vector_offsets</span> <span class="o">+</span> <span class="mh">0x180</span><span class="p">;</span>

<span class="n">kseg0_program_mem</span>  <span class="p">(</span><span class="n">rx</span><span class="p">)</span> <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0x9FC01000</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">bootloader_length</span><span class="o">&gt;</span>

<span class="n">kseg1_boot_mem</span>          <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC00000</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x480</span>

<span class="n">kseg1_boot_mem_4B0</span>      <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC004B0</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x1000</span> <span class="o">-</span> <span class="mh">0x4B0</span>
<span class="p">...</span>
<span class="n">config_BFC0FF40</span>             <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC0FF40</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x4</span>
<span class="n">config_BFC0FF44</span>             <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC0FF44</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x4</span>
<span class="n">config_BFC0FF48</span>             <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC0FF48</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x4</span>
<span class="p">...</span>
<span class="p">...</span>

<span class="n">SECTIONS</span>
<span class="p">{</span>
  <span class="p">.</span><span class="n">config_BFC0FF40</span> <span class="o">:</span> <span class="p">{</span>
    <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">config_BFC0FF40</span><span class="p">))</span>
  <span class="p">}</span> <span class="o">&gt;</span> <span class="n">config_BFC0FF40</span>
  <span class="p">.</span><span class="n">config_BFC0FF44</span> <span class="o">:</span> <span class="p">{</span>
    <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">config_BFC0FF44</span><span class="p">))</span>
  <span class="p">}</span> <span class="o">&gt;</span> <span class="n">config_BFC0FF44</span>
<span class="p">...</span>
<span class="p">...</span>
<span class="p">}</span>

<span class="cm">/* Boot Sections */</span>
<span class="p">.</span><span class="n">reset</span> <span class="n">_RESET_ADDR</span> <span class="o">:</span>
<span class="p">{</span>
  <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">reset</span><span class="p">))</span>
  <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">reset</span><span class="p">.</span><span class="n">startup</span><span class="p">))</span>
<span class="p">}</span> <span class="o">&gt;</span> <span class="n">kseg1_boot_mem</span>

<span class="p">.</span><span class="n">cache_init</span> <span class="o">:</span>
<span class="p">{</span>
  <span class="o">*</span><span class="p">(.</span><span class="n">cache_init</span><span class="p">)</span>
  <span class="o">*</span><span class="p">(.</span><span class="n">cache_init</span><span class="p">.</span><span class="o">*</span><span class="p">)</span>
<span class="p">}</span> <span class="o">&gt;</span> <span class="n">kseg1_boot_mem_4B0</span>
<span class="p">...</span>

<span class="cm">/* Interrupt vector table with vector offsets */</span>
<span class="p">.</span><span class="n">vectors</span> <span class="n">_ebase_address</span> <span class="o">+</span> <span class="n">_ebase_vector_offsets</span> <span class="o">+</span> <span class="mh">0x200</span> <span class="o">:</span>
<span class="p">{</span>
  <span class="cm">/*  Symbol __vector_offset_n points to .vector_n if it exists,
   *  otherwise points to the default handler. The
   *  vector_offset_init.o module then provides a .data section
   *  containing values used to initialize the vector-offset SFRs
   *  in the crt0 startup code.
   */</span>
  <span class="p">.</span> <span class="o">=</span> <span class="n">ALIGN</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="p">;</span>
  <span class="n">__vector_offset_0</span> <span class="o">=</span> <span class="p">(</span><span class="n">DEFINED</span><span class="p">(</span><span class="n">__vector_dispatch_0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(.</span> <span class="o">-</span> <span class="n">_ebase_address</span><span class="p">)</span> <span class="o">:</span> <span class="n">__vector_offset_default</span><span class="p">);</span>
  <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">vector_0</span><span class="p">))</span>
  <span class="p">...</span>
  <span class="p">...</span>
  <span class="cm">/* Default interrupt handler */</span>
  <span class="p">.</span> <span class="o">=</span> <span class="n">ALIGN</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="p">;</span>
  <span class="n">__vector_offset_default</span> <span class="o">=</span> <span class="p">.</span> <span class="o">-</span> <span class="n">_ebase_address</span><span class="p">;</span>
  <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">vector_default</span><span class="p">))</span>
<span class="p">}</span> <span class="o">&gt;</span> <span class="n">kseg0_program_mem</span>

</code></pre></div></div> <h3 id="for-bootloaders-placed-in-program-flash-memory-pic32mk-devices"> <a href="#for-bootloaders-placed-in-program-flash-memory-pic32mk-devices" aria-labelledby="for-bootloaders-placed-in-program-flash-memory-pic32mk-devices" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> For Bootloaders placed in Program Flash Memory (PIC32MK Devices) </h3> <ul> <li> <p>The bootloader start address by default will be start of <strong>Boot flash memory (0xBFC00000)</strong>. This is the default startup location for all PIC32M devices</p> </li> <li> <p>As the entire bootloader cannot be placed in BFM, Only the bootloader Reset Handler is placed in BFM. Rest of the bootloader code will be placed from <strong>start of Program Flash memory</strong></p> </li> <li> <p>XC32 Compiler calculates offset from the EBASE address and initializes the value of interrupt vector offset (OFFx) register. The offset register is combined with EBASE register using a bitwise OR operator to obtain the interrupt vector address that the CPU will jump to when the corresponding interrupt occurs.</p> </li> <li>If the EBASE address is aligned to 4KB, then all the interrupt vectors must be located within the 4KB from base address. <ul> <li><strong>Example:</strong> When _ebase_address is set to <strong>0x9D001000</strong> and interrupts vectors are not located withing the 4KB boundary from the ebase address <strong>(OFFx &gt; 0x1000)</strong>, then the bitwise OR operator may not provide correct interrupt vector address.</li> </ul> </li> <li>To provide maximum flexibility in placement of interrupt vectors: <ul> <li> <p>The <strong>_ebase_address</strong> is placed at start of Program flash memory <strong>(Example : 0x9D000000)</strong> like the default linker script</p> </li> <li> <p>Offsets of exceptions and vector sections are updated to place them from start of PFM. With this the interrupt handlers can be located anywhere in the bootloader space of PFM</p> </li> </ul> </li> <li>Generated linker scripts as explained above is shown here <strong>as an example</strong> <ul> <li>Bootloader length <strong>&lt;bootloader_length&gt;</strong> in the below snippet is auto generated based on the bootloader component added in MHC</li> </ul> </li> </ul> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PROVIDE</span><span class="p">(</span><span class="n">_vector_spacing</span> <span class="o">=</span> <span class="mh">0x0001</span><span class="p">);</span>
<span class="n">PROVIDE</span><span class="p">(</span><span class="n">_ebase_address</span> <span class="o">=</span> <span class="mh">0x9D000000</span><span class="p">);</span>

<span class="cm">/* Place the vector table and other exceptions after the device reset and
 * cache init code.
 */</span>
<span class="n">PROVIDE</span><span class="p">(</span><span class="n">_ebase_vector_offsets</span> <span class="o">=</span> <span class="mh">0x1000</span><span class="p">);</span>

<span class="n">_RESET_ADDR</span>                    <span class="o">=</span> <span class="mh">0xBFC00000</span><span class="p">;</span>
<span class="n">_BEV_EXCPT_ADDR</span>                <span class="o">=</span> <span class="mh">0xBFC00380</span><span class="p">;</span>
<span class="n">_DBG_EXCPT_ADDR</span>                <span class="o">=</span> <span class="mh">0xBFC00480</span><span class="p">;</span>
<span class="n">_SIMPLE_TLB_REFILL_EXCPT_ADDR</span>  <span class="o">=</span> <span class="n">_ebase_address</span> <span class="o">+</span> <span class="n">_ebase_vector_offsets</span> <span class="o">+</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">_GEN_EXCPT_ADDR</span>                <span class="o">=</span> <span class="n">_ebase_address</span> <span class="o">+</span> <span class="n">_ebase_vector_offsets</span> <span class="o">+</span> <span class="mh">0x180</span><span class="p">;</span>

<span class="n">kseg0_program_mem</span>  <span class="p">(</span><span class="n">rx</span><span class="p">)</span> <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0x9D000000</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">bootloader_length</span><span class="o">&gt;</span>

<span class="n">kseg1_boot_mem</span>              <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC00000</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x480</span>
<span class="n">kseg1_boot_mem_4B0</span>          <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC004B0</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x1000</span> <span class="o">-</span> <span class="mh">0x4B0</span>
<span class="p">...</span>
<span class="n">config_BFC03F40</span>             <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC03F40</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x4</span>
<span class="n">config_BFC03F44</span>             <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC03F44</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x4</span>
<span class="n">config_BFC03F48</span>             <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC03F48</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">SECTIONS</span>
<span class="p">{</span>
  <span class="p">.</span><span class="n">config_BFC03F40</span> <span class="o">:</span> <span class="p">{</span>
    <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">config_BFC03F40</span><span class="p">))</span>
  <span class="p">}</span> <span class="o">&gt;</span> <span class="n">config_BFC03F40</span>
  <span class="p">.</span><span class="n">config_BFC03F44</span> <span class="o">:</span> <span class="p">{</span>
    <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">config_BFC03F44</span><span class="p">))</span>
  <span class="p">}</span> <span class="o">&gt;</span> <span class="n">config_BFC03F44</span>
<span class="p">...</span>
<span class="p">...</span>
<span class="p">}</span>

<span class="cm">/* Boot Sections */</span>
<span class="p">.</span><span class="n">reset</span> <span class="n">_RESET_ADDR</span> <span class="o">:</span>
<span class="p">{</span>
  <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">reset</span><span class="p">))</span>
  <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">reset</span><span class="p">.</span><span class="n">startup</span><span class="p">))</span>
<span class="p">}</span> <span class="o">&gt;</span> <span class="n">kseg1_boot_mem</span>

<span class="p">...</span>

<span class="cm">/* Interrupt vector table with vector offsets */</span>
<span class="p">.</span><span class="n">vectors</span> <span class="n">_ebase_address</span> <span class="o">+</span> <span class="n">_ebase_vector_offsets</span> <span class="o">+</span> <span class="mh">0x200</span> <span class="o">:</span>
<span class="p">{</span>
  <span class="cm">/*  Symbol __vector_offset_n points to .vector_n if it exists,
   *  otherwise points to the default handler. The
   *  vector_offset_init.o module then provides a .data section
   *  containing values used to initialize the vector-offset SFRs
   *  in the crt0 startup code.
   */</span>
  <span class="p">.</span> <span class="o">=</span> <span class="n">ALIGN</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="p">;</span>
  <span class="n">__vector_offset_0</span> <span class="o">=</span> <span class="p">(</span><span class="n">DEFINED</span><span class="p">(</span><span class="n">__vector_dispatch_0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(.</span> <span class="o">-</span> <span class="n">_ebase_address</span><span class="p">)</span> <span class="o">:</span> <span class="n">__vector_offset_default</span><span class="p">);</span>
  <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">vector_0</span><span class="p">))</span>
  <span class="p">...</span>
  <span class="p">...</span>
  <span class="cm">/* Default interrupt handler */</span>
  <span class="p">.</span> <span class="o">=</span> <span class="n">ALIGN</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="p">;</span>
  <span class="n">__vector_offset_default</span> <span class="o">=</span> <span class="p">.</span> <span class="o">-</span> <span class="n">_ebase_address</span><span class="p">;</span>
  <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">vector_default</span><span class="p">))</span>
<span class="p">}</span> <span class="o">&gt;</span> <span class="n">kseg0_program_mem</span>

</code></pre></div></div> <h3 id="for-bootloaders-placed-in-boot-flash-memory-pic32mx-devices"> <a href="#for-bootloaders-placed-in-boot-flash-memory-pic32mx-devices" aria-labelledby="for-bootloaders-placed-in-boot-flash-memory-pic32mx-devices" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> For Bootloaders placed in Boot Flash Memory (PIC32MX Devices) </h3> <ul> <li> <p>The bootloader start address by default will be start of <strong>Boot flash memory (0xBFC00000)</strong>. This is the default startup location for all PIC32M devices</p> </li> <li> <p>The Initial <strong>1280 Bytes (0x500)</strong> from Bootloader start address are used by Reset Handler and then followed by rest of bootloader code.</p> </li> <li> <p>Length of the bootloader is calculated based on the bootloader being added to MHC</p> </li> <li> <p>In PIC32MX devices the _ebase_address holds the start address of vector table and it must be placed at 4KB boundary after the Reset Handler section</p> </li> <li> <p>Generated linker scripts as explained above is shown here <strong>as an example.</strong></p> <ul> <li>Bootloader length <strong>&lt;bootloader_length&gt;</strong> in the below snippet is auto generated based on the bootloader component added in MHC</li> </ul> </li> </ul> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PROVIDE</span><span class="p">(</span><span class="n">_vector_spacing</span> <span class="o">=</span> <span class="mh">0x0001</span><span class="p">);</span>
<span class="n">PROVIDE</span><span class="p">(</span><span class="n">_ebase_address</span> <span class="o">=</span> <span class="mh">0x9FC01000</span><span class="p">);</span>

<span class="n">_RESET_ADDR</span>                    <span class="o">=</span> <span class="mh">0xBFC00000</span><span class="p">;</span>
<span class="n">_BEV_EXCPT_ADDR</span>                <span class="o">=</span> <span class="mh">0xBFC00380</span><span class="p">;</span>
<span class="n">_DBG_EXCPT_ADDR</span>                <span class="o">=</span> <span class="mh">0xBFC00480</span><span class="p">;</span>
<span class="n">_DBG_CODE_ADDR</span>                 <span class="o">=</span> <span class="mh">0xBFC02000</span><span class="p">;</span>
<span class="n">_DBG_CODE_SIZE</span>                 <span class="o">=</span> <span class="mh">0xFF0</span><span class="p">;</span>
<span class="n">_GEN_EXCPT_ADDR</span>                <span class="o">=</span> <span class="n">_ebase_address</span> <span class="o">+</span> <span class="mh">0x180</span><span class="p">;</span>

<span class="n">kseg0_program_mem</span>     <span class="p">(</span><span class="n">rx</span><span class="p">)</span>  <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0x9FC00500</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">bootloader_length</span><span class="o">&gt;</span>
<span class="n">kseg1_boot_mem</span>              <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC00000</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x490</span>
<span class="p">...</span>
<span class="n">config3</span>                     <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC02FF0</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x4</span>
<span class="n">config2</span>                     <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC02FF4</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x4</span>

<span class="n">SECTIONS</span>
<span class="p">{</span>
  <span class="p">.</span><span class="n">config_BFC02FF0</span> <span class="o">:</span> <span class="p">{</span>
    <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">config_BFC02FF0</span><span class="p">))</span>
  <span class="p">}</span> <span class="o">&gt;</span> <span class="n">config3</span>
  <span class="p">.</span><span class="n">config_BFC02FF4</span> <span class="o">:</span> <span class="p">{</span>
    <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">config_BFC02FF4</span><span class="p">))</span>
  <span class="p">}</span> <span class="o">&gt;</span> <span class="n">config2</span>
<span class="p">}</span>

<span class="cm">/* Boot Sections */</span>
<span class="p">.</span><span class="n">reset</span> <span class="n">_RESET_ADDR</span> <span class="o">:</span>
<span class="p">{</span>
  <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">reset</span><span class="p">))</span>
  <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">reset</span><span class="p">.</span><span class="n">startup</span><span class="p">))</span>
<span class="p">}</span> <span class="o">&gt;</span> <span class="n">kseg1_boot_mem</span>
<span class="p">...</span>

<span class="p">.</span><span class="n">vector_0</span> <span class="n">_ebase_address</span> <span class="o">+</span> <span class="mh">0x200</span> <span class="o">+</span> <span class="p">((</span><span class="n">_vector_spacing</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="mi">0</span><span class="p">)</span> <span class="o">:</span>
<span class="p">{</span>
   <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">vector_0</span><span class="p">))</span>
<span class="p">}</span> <span class="o">&gt;</span> <span class="n">kseg0_program_mem</span>
<span class="n">ASSERT</span> <span class="p">(</span><span class="n">_vector_spacing</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">SIZEOF</span><span class="p">(.</span><span class="n">vector_0</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">_vector_spacing</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span> <span class="s">"function at exception vector 0 too large"</span><span class="p">)</span>

<span class="p">.</span><span class="n">vector_1</span> <span class="n">_ebase_address</span> <span class="o">+</span> <span class="mh">0x200</span> <span class="o">+</span> <span class="p">((</span><span class="n">_vector_spacing</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1</span><span class="p">)</span> <span class="o">:</span>
<span class="p">{</span>
   <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">vector_1</span><span class="p">))</span>
<span class="p">}</span> <span class="o">&gt;</span> <span class="n">kseg0_program_mem</span>
<span class="n">ASSERT</span> <span class="p">(</span><span class="n">_vector_spacing</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">SIZEOF</span><span class="p">(.</span><span class="n">vector_1</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">_vector_spacing</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span> <span class="s">"function at exception vector 1 too large"</span><span class="p">)</span>
<span class="p">...</span>
<span class="p">...</span>

</code></pre></div></div> <h3 id="for-bootloaders-placed-in-program-flash-memory-pic32mx-devices"> <a href="#for-bootloaders-placed-in-program-flash-memory-pic32mx-devices" aria-labelledby="for-bootloaders-placed-in-program-flash-memory-pic32mx-devices" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> For Bootloaders placed in Program Flash Memory (PIC32MX Devices) </h3> <ul> <li> <p>The bootloader start address by default will be start of <strong>Boot flash memory (0xBFC00000)</strong>. This is the default startup location for all PIC32M devices</p> </li> <li> <p>As the entire bootloader cannot be placed in BFM, Only the bootloader Reset Handler is placed in BFM. Rest of the bootloader code will be placed from <strong>start of Program Flash memory</strong></p> </li> <li> <p>The <strong>_ebase_address</strong> is placed at start of Program flash memory <strong>(Example : 0x9D000000)</strong></p> </li> <li> <p>Generated linker scripts as explained above is shown here <strong>as an example.</strong></p> <ul> <li>Bootloader length <strong>&lt;bootloader_length&gt;</strong> in the below snippet is auto generated based on the bootloader component added in MHC</li> </ul> </li> </ul> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PROVIDE</span><span class="p">(</span><span class="n">_vector_spacing</span> <span class="o">=</span> <span class="mh">0x0001</span><span class="p">);</span>
<span class="n">PROVIDE</span><span class="p">(</span><span class="n">_ebase_address</span> <span class="o">=</span> <span class="mh">0x9D000000</span><span class="p">);</span>

<span class="n">_RESET_ADDR</span>                    <span class="o">=</span> <span class="mh">0xBFC00000</span><span class="p">;</span>
<span class="n">_BEV_EXCPT_ADDR</span>                <span class="o">=</span> <span class="mh">0xBFC00380</span><span class="p">;</span>
<span class="n">_DBG_EXCPT_ADDR</span>                <span class="o">=</span> <span class="mh">0xBFC00480</span><span class="p">;</span>
<span class="n">_DBG_CODE_ADDR</span>                 <span class="o">=</span> <span class="mh">0x9FC00490</span><span class="p">;</span>
<span class="n">_DBG_CODE_SIZE</span>                 <span class="o">=</span> <span class="mh">0x760</span><span class="p">;</span>
<span class="n">_GEN_EXCPT_ADDR</span>                <span class="o">=</span> <span class="n">_ebase_address</span> <span class="o">+</span> <span class="mh">0x180</span><span class="p">;</span>

<span class="n">kseg0_program_mem</span>     <span class="p">(</span><span class="n">rx</span><span class="p">)</span>  <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0x9D000000</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">bootloader_length</span><span class="o">&gt;</span>
<span class="n">kseg1_boot_mem</span>              <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC00000</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x490</span>
<span class="p">...</span>
<span class="n">config3</span>                     <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC00BF0</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x4</span>
<span class="n">config2</span>                     <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0xBFC00BF4</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x4</span>

<span class="n">SECTIONS</span>
<span class="p">{</span>
  <span class="p">.</span><span class="n">config_BFC00BF0</span> <span class="o">:</span> <span class="p">{</span>
    <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">config_BFC00BF0</span><span class="p">))</span>
  <span class="p">}</span> <span class="o">&gt;</span> <span class="n">config3</span>
  <span class="p">.</span><span class="n">config_BFC00BF4</span> <span class="o">:</span> <span class="p">{</span>
    <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">config_BFC00BF4</span><span class="p">))</span>
  <span class="p">}</span> <span class="o">&gt;</span> <span class="n">config2</span>
<span class="p">}</span>

<span class="cm">/* Boot Sections */</span>
<span class="p">.</span><span class="n">reset</span> <span class="n">_RESET_ADDR</span> <span class="o">:</span>
<span class="p">{</span>
  <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">reset</span><span class="p">))</span>
  <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">reset</span><span class="p">.</span><span class="n">startup</span><span class="p">))</span>
<span class="p">}</span> <span class="o">&gt;</span> <span class="n">kseg1_boot_mem</span>
<span class="p">...</span>

<span class="p">.</span><span class="n">vector_0</span> <span class="n">_ebase_address</span> <span class="o">+</span> <span class="mh">0x200</span> <span class="o">+</span> <span class="p">((</span><span class="n">_vector_spacing</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="mi">0</span><span class="p">)</span> <span class="o">:</span>
<span class="p">{</span>
   <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">vector_0</span><span class="p">))</span>
<span class="p">}</span> <span class="o">&gt;</span> <span class="n">kseg0_program_mem</span>
<span class="n">ASSERT</span> <span class="p">(</span><span class="n">_vector_spacing</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">SIZEOF</span><span class="p">(.</span><span class="n">vector_0</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">_vector_spacing</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span> <span class="s">"function at exception vector 0 too large"</span><span class="p">)</span>

<span class="p">.</span><span class="n">vector_1</span> <span class="n">_ebase_address</span> <span class="o">+</span> <span class="mh">0x200</span> <span class="o">+</span> <span class="p">((</span><span class="n">_vector_spacing</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1</span><span class="p">)</span> <span class="o">:</span>
<span class="p">{</span>
   <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(.</span><span class="n">vector_1</span><span class="p">))</span>
<span class="p">}</span> <span class="o">&gt;</span> <span class="n">kseg0_program_mem</span>
<span class="n">ASSERT</span> <span class="p">(</span><span class="n">_vector_spacing</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">SIZEOF</span><span class="p">(.</span><span class="n">vector_1</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">_vector_spacing</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span> <span class="s">"function at exception vector 1 too large"</span><span class="p">)</span>
<span class="p">...</span>
<span class="p">...</span>

</code></pre></div></div> <h3 id="using-both-boot-flash-panels-on-pic32mz-device"> <a href="#using-both-boot-flash-panels-on-pic32mz-device" aria-labelledby="using-both-boot-flash-panels-on-pic32mz-device" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Both Boot Flash Panels on PIC32MZ device </h3> <ul> <li> <p>For PIC32MZ devices, with two 80 KB Boot Flash panels, bootloader may or may not fit entirely in one Boot Flash panel.</p> </li> <li> <p>In order to fit some of the Bootloaders, the linker script makes the two Boot Flash panels look like one contiguous Boot Flash memory. Unimplemented areas are blocked using a fill command to the linker</p> </li> </ul> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kseg0_program_mem</span>     <span class="p">(</span><span class="n">rx</span><span class="p">)</span>  <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0x9FC01000</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x2FF00</span> <span class="o">-</span> <span class="mh">0x1000</span>

<span class="cm">/* Bootloader needs to be placed in both the Boot Flash Panels (lower and upper boot alias).
   Below region is used to fill 0xFF in reserved space between these two panles.
*/</span>
<span class="n">protected_reg</span>               <span class="o">:</span> <span class="n">ORIGIN</span> <span class="o">=</span> <span class="mh">0x9FC14000</span><span class="p">,</span> <span class="n">LENGTH</span> <span class="o">=</span> <span class="mh">0x20000</span><span class="o">-</span><span class="mh">0x14000</span>

<span class="p">...</span>
<span class="p">...</span>

<span class="n">SECTIONS</span>
<span class="p">{</span>
  <span class="p">.</span><span class="n">fill1</span> <span class="o">:</span>
  <span class="p">{</span>
    <span class="n">FILL</span><span class="p">(</span><span class="mh">0xFF</span><span class="p">);</span>
    <span class="p">.</span> <span class="o">=</span> <span class="n">ORIGIN</span><span class="p">(</span><span class="n">protected_reg</span><span class="p">)</span> <span class="o">+</span> <span class="n">LENGTH</span><span class="p">(</span><span class="n">protected_reg</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">BYTE</span><span class="p">(</span><span class="mh">0xFF</span><span class="p">)</span>
  <span class="p">}</span> <span class="o">&gt;</span> <span class="n">protected_reg</span>
<span class="p">}</span>

</code></pre></div></div> <h3 id="note"> <a href="#note" aria-labelledby="note" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Note </h3> <ul> <li> <p>Device configuration bits should be updated by bootloader only</p> </li> <li> <p>The bootloader linker script is generated using generic templates for the device family. Generated linker script should be modified if there any changes or modifications to the specific device being used.</p> </li> </ul> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2021 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
