<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../../../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../../../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../../../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../../../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>USB Device HID Bootloader Protocol | Microchip MPLAB Harmony 3 Bootloader Library help</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="USB Device HID Bootloader Protocol" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 Bootloader Library package" /> <meta property="og:description" content="Harmony 3 Bootloader Library package" /> <link rel="canonical" href="../../../../../templates/src/unified/docs/usb/usb_bootloader_protocol.html" /> <meta property="og:url" content="../../../../../templates/src/unified/docs/usb/usb_bootloader_protocol.html" /> <meta property="og:site_name" content="Microchip MPLAB Harmony 3 Bootloader Library help" /> <script type="application/ld+json"> {"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"@type":"WebPage","headline":"USB Device HID Bootloader Protocol","url":"../../../../../templates/src/unified/docs/usb/usb_bootloader_protocol.html","description":"Harmony 3 Bootloader Library package","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../../../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../index.html" class="nav-list-link">Bootloader Library Help</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../templates/src/optimized/docs/uart/readme.html" class="nav-list-link">UART Bootloader</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/uart/uart_bootloader_how_library_works.html" class="nav-list-link">How The Library Works</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/uart/uart_bootloader_system_execution_flow.html" class="nav-list-link">Bootloader System Execution Flow</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/uart/uart_bootloader_configurations.html" class="nav-list-link">Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/uart/uart_application_configurations.html" class="nav-list-link">Application Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/uart/uart_bootloader_library_interface.html" class="nav-list-link">Library Interface</a> </li><li class="nav-list-item "> <a href="../../../../../tools/docs/readme_btl_host.html" class="nav-list-link">Tools Help</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/uart/uart_debugging.html" class="nav-list-link">Debugging Help</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../templates/src/optimized/docs/i2c/readme.html" class="nav-list-link">I2C Bootloader</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/i2c/i2c_bootloader_how_library_works.html" class="nav-list-link">How The Library Works</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/i2c/i2c_bootloader_system_execution_flow.html" class="nav-list-link">Bootloader System Execution Flow</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/i2c/i2c_bootloader_configurations.html" class="nav-list-link">Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/i2c/i2c_application_configurations.html" class="nav-list-link">Application Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/i2c/i2c_bootloader_library_interface.html" class="nav-list-link">Library Interface</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/i2c/i2c_bootloader_tools_help.html" class="nav-list-link">Tools Help</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/i2c/i2c_debugging.html" class="nav-list-link">Debugging Help</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../templates/src/optimized/docs/can/readme.html" class="nav-list-link">CAN Bootloader</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/can/can_bootloader_how_library_works.html" class="nav-list-link">How The Library Works</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/can/can_bootloader_system_execution_flow.html" class="nav-list-link">Bootloader System Execution Flow</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/can/can_bootloader_configurations.html" class="nav-list-link">Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/can/can_application_configurations.html" class="nav-list-link">Application Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/can/can_bootloader_library_interface.html" class="nav-list-link">Library Interface</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/can/can_bootloader_tools_help.html" class="nav-list-link">Tools Help</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/can/can_debugging.html" class="nav-list-link">Debugging Help</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../templates/src/optimized/docs/serial_memory/readme.html" class="nav-list-link">Serial Memory Bootloader</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/serial_memory/serial_bootloader_how_library_works.html" class="nav-list-link">How The Library Works</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/serial_memory/serial_bootloader_execution_flow.html" class="nav-list-link">Bootloader Execution Flow</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/serial_memory/serial_bootloader_configurations.html" class="nav-list-link">Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/serial_memory/serial_application_configurations.html" class="nav-list-link">Application Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/serial_memory/serial_bootloader_library_interface.html" class="nav-list-link">Library Interface</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/optimized/docs/serial_memory/serial_debugging.html" class="nav-list-link">Debugging Help</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../templates/src/unified/docs/usb/readme.html" class="nav-list-link">USB Device HID Bootloader</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../templates/src/unified/docs/usb/usb_bootloader_how_library_works.html" class="nav-list-link">How The Library Works</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/unified/docs/usb/usb_bootloader_system_execution_flow.html" class="nav-list-link">Bootloader System Execution Flow</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/unified/docs/usb/usb_bootloader_configurations.html" class="nav-list-link">Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/unified/docs/usb/usb_application_configurations.html" class="nav-list-link">Application Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/unified/docs/usb/usb_bootloader_library_interface.html" class="nav-list-link">Library Interface</a> </li><li class="nav-list-item "> <a href="../../../../../tools/docs/readme_UnifiedHost_usb_device_hid.html" class="nav-list-link">Tools Help</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/unified/docs/usb/usb_debugging.html" class="nav-list-link">Debugging Help</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../templates/src/unified/docs/udp/readme.html" class="nav-list-link">UDP Bootloader</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../templates/src/unified/docs/udp/udp_bootloader_how_library_works.html" class="nav-list-link">How The Library Works</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/unified/docs/udp/udp_bootloader_system_execution_flow.html" class="nav-list-link">Bootloader System Execution Flow</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/unified/docs/udp/udp_bootloader_configurations.html" class="nav-list-link">Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/unified/docs/udp/udp_application_configurations.html" class="nav-list-link">Application Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/unified/docs/udp/udp_bootloader_library_interface.html" class="nav-list-link">Library Interface</a> </li><li class="nav-list-item "> <a href="../../../../../tools/docs/readme_UnifiedHost_udp.html" class="nav-list-link">Tools Help</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/unified/docs/udp/udp_debugging.html" class="nav-list-link">Debugging Help</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../templates/src/fs/docs/readme.html" class="nav-list-link">File System Bootloader</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../templates/src/fs/docs/fs_bootloader_how_library_works.html" class="nav-list-link">How The Library Works</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/fs/docs/fs_bootloader_system_execution_flow.html" class="nav-list-link">Bootloader System Execution Flow</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/fs/docs/fs_bootloader_configurations_usb.html" class="nav-list-link">USB Host MSD Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/fs/docs/fs_bootloader_configurations_sdcard.html" class="nav-list-link">SD Card Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/fs/docs/fs_bootloader_configurations_serial.html" class="nav-list-link">Serial Memory Bootloader Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/fs/docs/fs_application_configurations.html" class="nav-list-link">Application Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/fs/docs/fs_bootloader_library_interface.html" class="nav-list-link">Library Interface</a> </li><li class="nav-list-item "> <a href="../../../../../templates/src/fs/docs/fs_debugging.html" class="nav-list-link">Debugging Help</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="../../../../../apps/readme.html" class="nav-list-link">Bootloader Applications Help</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../templates/docs/appendix.html" class="nav-list-link">Appendix</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../templates/arm/docs/arm_bootloader_memory_layout.html" class="nav-list-link">Bootloader Memory Layout For CORTEX-M Based MCUs</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../templates/arm/docs/arm_bootloader_memory_layout_basic.html" class="nav-list-link">Basic Memory layout</a> </li><li class="nav-list-item "> <a href="../../../../../templates/arm/docs/arm_bootloader_memory_layout_fail_safe_update.html" class="nav-list-link">Fail Safe Update Memory layout</a> </li><li class="nav-list-item "> <a href="../../../../../templates/arm/docs/arm_bootloader_memory_layout_live_update.html" class="nav-list-link">Live Update Memory layout</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../templates/mips/docs/mips_bootloader_memory_layout.html" class="nav-list-link">Bootloader Memory Layout For MIPS Based MCUs</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../templates/mips/docs/mips_bootloader_memory_layout_basic.html" class="nav-list-link">Basic Memory layout</a> </li><li class="nav-list-item "> <a href="../../../../../templates/mips/docs/mips_bootloader_memory_layout_fail_safe_update.html" class="nav-list-link">Fail Safe Update Memory layout</a> </li><li class="nav-list-item "> <a href="../../../../../templates/mips/docs/mips_bootloader_memory_layout_live_update.html" class="nav-list-link">Live Update Memory layout</a> </li></ul></li><li class="nav-list-item "><a href="../../../../../templates/docs/bootloader_sizing_and_considerations.html" class="nav-list-link">Bootloader Sizing And Considerations</a></li><li class="nav-list-item "><a href="../../../../../templates/docs/bootloader_trigger_methods.html" class="nav-list-link">Bootloader Trigger Methods</a></li><li class="nav-list-item "><a href="../../../../../templates/src/optimized/docs/can/can_bootloader_firmware_update_execution_flow.html" class="nav-list-link">CAN Bootloader Firmware Update Execution Flow</a></li><li class="nav-list-item "><a href="../../../../../templates/src/optimized/docs/can/can_bootloader_protocol.html" class="nav-list-link">CAN Bootloader Protocol</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../templates/arm/docs/arm_configurations.html" class="nav-list-link">Configurations for CORTEX-M based MCUs</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../templates/arm/docs/arm_bootloader_linker_config.html" class="nav-list-link">Bootloader Linker Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/arm/docs/arm_application_project_config.html" class="nav-list-link">Application Project Configurations</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../templates/mips/docs/mips_configurations.html" class="nav-list-link">Configurations for MIPS based MCUs</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../templates/mips/docs/mips_bootloader_linker_config.html" class="nav-list-link">Bootloader Linker Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/mips/docs/mips_application_linker_config.html" class="nav-list-link">Application Linker Configurations</a> </li><li class="nav-list-item "> <a href="../../../../../templates/mips/docs/mips_application_project_config.html" class="nav-list-link">Application Project Configurations</a> </li></ul></li><li class="nav-list-item "><a href="../../../../../templates/docs/debugging_bootloader_and_application.html" class="nav-list-link">Debugging Bootloader And Application</a></li><li class="nav-list-item "><a href="../../../../../templates/arm/docs/arm_bootloader_debugging.html" class="nav-list-link">Debugging Bootloaders For CORTEX-M based MCUs</a></li><li class="nav-list-item "><a href="../../../../../templates/src/fs/docs/fs_bootloader_firmware_update_execution_flow.html" class="nav-list-link">File System Bootloader Firmware Update Execution Flow</a></li><li class="nav-list-item "><a href="../../../../../templates/src/optimized/docs/i2c/i2c_bootloader_firmware_update_execution_flow.html" class="nav-list-link">I2C Bootloader Firmware Update Execution Flow</a></li><li class="nav-list-item "><a href="../../../../../templates/src/optimized/docs/i2c/i2c_bootloader_protocol.html" class="nav-list-link">I2C Bootloader Protocol</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../tools/readme.html" class="nav-list-link">Tools Help</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../../tools/docs/readme_btl_app_merge_bin.html" class="nav-list-link">Bootloader and Application binary merge script Help</a> </li><li class="nav-list-item "> <a href="../../../../../tools/docs/readme_btl_bin_to_c_array.html" class="nav-list-link">Binary to C Array script help</a> </li></ul></li><li class="nav-list-item "><a href="../../../../../templates/src/optimized/docs/uart/uart_bootloader_firmware_update_execution_flow.html" class="nav-list-link">UART Bootloader Firmware Update Execution Flow</a></li><li class="nav-list-item "><a href="../../../../../templates/src/optimized/docs/uart/uart_bootloader_protocol.html" class="nav-list-link">UART Bootloader Protocol</a></li><li class="nav-list-item "><a href="../../../../../templates/src/unified/docs/udp/udp_bootloader_firmware_update_execution_flow.html" class="nav-list-link">UDP Bootloader Firmware Update Execution Flow</a></li><li class="nav-list-item "><a href="../../../../../templates/src/unified/docs/udp/udp_bootloader_protocol.html" class="nav-list-link">UDP Bootloader Protocol</a></li><li class="nav-list-item "><a href="../../../../../templates/src/unified/docs/usb/usb_bootloader_firmware_update_execution_flow.html" class="nav-list-link">USB Device HID Bootloader Firmware Update Execution Flow</a></li><li class="nav-list-item active"><a href="../../../../../templates/src/unified/docs/usb/usb_bootloader_protocol.html" class="nav-list-link active">USB Device HID Bootloader Protocol</a></li></ul></li><li class="nav-list-item"><a href="../../../../../release_notes.html" class="nav-list-link">Release notes</a></li><li class="nav-list-item"><a href="../../../../../mplab_harmony_license.html" class="nav-list-link">License</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Microchip MPLAB Harmony 3 Bootloader Library help" aria-label="Search Microchip MPLAB Harmony 3 Bootloader Library help" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../../../../templates/docs/appendix.html">Appendix</a></li> <li class="breadcrumb-nav-list-item"><span>USB Device HID Bootloader Protocol</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <p><a href="https://www.microchip.com"><img src="https://www.microchip.com/ResourcePackages/Microchip/assets/dist/images/logo.png" alt="MCHP" /></a></p> <h1 id="usb-device-hid-bootloader-protocol"> <a href="#usb-device-hid-bootloader-protocol" aria-labelledby="usb-device-hid-bootloader-protocol" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> USB Device HID Bootloader Protocol </h1> <p>The Unified host application running on Host-PC uses below communication protocol to interact with the Bootloader firmware. The Unified host application acts as a master and issues commands to the Bootloader firmware to perform specific operations.</p> <h2 id="frame-format"> <a href="#frame-format" aria-labelledby="frame-format" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Frame Format </h2> <p>The communication protocol follows the frame format, as shown below</p> <p>[&lt;SOH&gt;…]&lt;SOH&gt;[&lt;DATA&gt;…]&lt;CRCL&gt;&lt;CRCH&gt;&lt;EOT&gt;</p> <p><strong>Where:</strong></p> <p>&lt;…&gt; Represents a byte</p> <p>[…] Represents an optional or variable number of bytes</p> <ul> <li> <p>The frame format remains the same in both directions, that is, from the host application to the Bootloader, and from the Bootloader to the host application.</p> </li> <li> <p>The frame starts with a control character, <strong>Start of Header (SOH)</strong>, and ends with another control character, <strong>End of Transmission (EOT)</strong></p> </li> <li> <p>The integrity of the frame is protected by two bytes of Cyclic Redundancy Check (CRC)-16, represented by CRCL (low-byte) and CRCH (high-byte)</p> </li> </ul> <h2 id="control-characters"> <a href="#control-characters" aria-labelledby="control-characters" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Control Characters </h2> <p>Some bytes in the Data field may imitate the control characters, SOH and EOT. The Data Link Escape (DLE) character is used to escape such bytes that could be interpreted as control characters. The Bootloader always accepts the byte following a &lt;DLE&gt; as data, and always sends a &lt;DLE&gt; before any of the control characters.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Control</th> <th>Hex Value</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>&lt;SOH&gt;</td> <td>0x01</td> <td>Marks the beginning of a frame</td> </tr> <tr> <td>&lt;EOT&gt;</td> <td>0x04</td> <td>Marks the end of a frame</td> </tr> <tr> <td>&lt;DLE&gt;</td> <td>0x10</td> <td>Data link escape</td> </tr> </tbody> </table></div> <h2 id="commands"> <a href="#commands" aria-labelledby="commands" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Commands </h2> <p>The PC host application can issue the commands listed in below to the Bootloader. The first byte in the data field carries the command.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Command Value in Hexadecimal</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>0x01</td> <td>Read the Bootloader version information.</td> </tr> <tr> <td>0x02</td> <td>Erase the Flash.</td> </tr> <tr> <td>0x03</td> <td>Program the Flash.</td> </tr> <tr> <td>0x04</td> <td>Read the CRC.</td> </tr> <tr> <td>0x05</td> <td>Jump to the application.</td> </tr> </tbody> </table></div> <h2 id="read-bootloader-version-information"> <a href="#read-bootloader-version-information" aria-labelledby="read-bootloader-version-information" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Read Bootloader Version Information </h2> <p>The Read Version command sequence is as shown in below table with corresponding response</p> <div class="table-wrapper"><table> <thead> <tr> <th>Request</th> <th>Response</th> </tr> </thead> <tbody> <tr> <td>[&lt;SOH&gt;…]&lt;SOH&gt;[&lt;0x01&gt;]&lt;CRCL&gt;&lt;CRCH&gt;&lt;EOT&gt;</td> <td>[&lt;SOH&gt;…]&lt;SOH&gt;&lt;0x01&gt;&lt;MAJOR_VER&gt;&lt;MINOR_VER&gt;&lt;CRCL&gt;&lt;CRCH&gt;&lt;EOT&gt;</td> </tr> </tbody> </table></div> <ul> <li>The Bootloader responds to the PC request for version information in two bytes as shown above <ul> <li>MAJOR_VER = Major version of the Bootloader</li> <li>MINOR_VER = Minor version of the Bootloader</li> </ul> </li> </ul> <h2 id="erase-flash"> <a href="#erase-flash" aria-labelledby="erase-flash" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Erase Flash </h2> <p>The Erase Flash command sequence is as shown in below table with corresponding response</p> <div class="table-wrapper"><table> <thead> <tr> <th>Request</th> <th>Response</th> </tr> </thead> <tbody> <tr> <td>[&lt;SOH&gt;…]&lt;SOH&gt;&lt;0x02&gt;&lt;CRCL&gt;&lt;CRCH&gt;&lt;EOT&gt;</td> <td>[&lt;SOH&gt;…]&lt;SOH&gt;&lt;0x02&gt;&lt;CRCL&gt;&lt;CRCH&gt;&lt;EOT&gt;</td> </tr> </tbody> </table></div> <ul> <li> <p>On receiving the erase Flash command from the PC host application, the Bootloader erases that entire application program space starting from the application start address configured</p> </li> <li> <p>The Bootloader Task routine returns only after entire application space is erased</p> </li> </ul> <h2 id="program-flash"> <a href="#program-flash" aria-labelledby="program-flash" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Program Flash </h2> <p>The Program Flash command sequence is as shown in below table with corresponding response</p> <div class="table-wrapper"><table> <thead> <tr> <th>Request</th> <th>Response</th> </tr> </thead> <tbody> <tr> <td>[&lt;SOH&gt;…]&lt;SOH&gt;&lt;0x03&gt;[&lt;HEX_RECORD&gt;…]&lt;CRCL&gt;&lt;CRCH&gt;&lt;EOT&gt;</td> <td>[&lt;SOH&gt;…]&lt;SOH&gt;&lt;0x03&gt;&lt;CRCL&gt;&lt;CRCH&gt;&lt;EOT&gt;</td> </tr> </tbody> </table></div> <ul> <li> <p><strong>HEX_RECORD</strong> is the Intel Hex record in hexadecimal format</p> </li> <li> <p>The PC host application sends one or multiple hex records in Intel Hex format along with the program Flash command</p> </li> <li> <p>The MPLAB XC32 C/C++ Compiler generates the image in the Intel Hex format. Each line in the Intel hexadecimal file represents a hexadecimal record</p> </li> <li> <p>Each hexadecimal record starts with a colon (:) and is in ASCII format. The PC host application discards the colon and converts the remaining data from ASCII to hexadecimal, and then sends the data to the Bootloader</p> </li> <li> <p>The Bootloader extracts the destination address and data from the hex record, and writes the data into program Flash</p> </li> </ul> <h2 id="read-crc-currently-not-supported"> <a href="#read-crc-currently-not-supported" aria-labelledby="read-crc-currently-not-supported" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Read CRC (Currently Not Supported) </h2> <p>The Read CRC command sequence is as shown in below table with corresponding response</p> <div class="table-wrapper"><table> <thead> <tr> <th>Request</th> <th>Response</th> </tr> </thead> <tbody> <tr> <td>[&lt;SOH&gt;…]&lt;SOH&gt;&lt;0x04&gt;&lt;ADRS_LB&gt;&lt;ADRS_HB&gt;&lt;ADRS_UB&gt;&lt;ADRS_MB&gt;&lt;NUMBYTES_LB&gt;&lt;NUMBYTES_HB&gt;&lt;NUMBYTES_UB&gt;&lt;NUMBYTES_MB&gt;&lt;CRCL&gt;&lt;CRCH&gt;&lt;EOT&gt;</td> <td>[&lt;SOH&gt;…]&lt;SOH&gt;&lt;0x04&gt;&lt;FLASH_CRCL&gt;&lt;FLASH_CRCH&gt;&lt;CRCL&gt;&lt;CRCH&gt;&lt;EOT&gt;</td> </tr> </tbody> </table></div> <ul> <li> <p>The read CRC command is used to verify the content of the program Flash after programming</p> </li> <li> <p>ADRS_LB, ADRS_HB, ADRS_UB and ADRS_MB represent the 32-bit Flash addresses from where the CRC calculation begins</p> </li> <li> <p>NUMBYTES_LB, NUMBYTES_HB, NUMBYTES_UB and NUMBYTES_MB represent the total number of bytes in 32-bit format for which the CRC is to be calculated</p> </li> </ul> <h2 id="jump-to-application"> <a href="#jump-to-application" aria-labelledby="jump-to-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Jump to Application </h2> <p>The Jump To Application command sequence is as shown in below table with corresponding response</p> <div class="table-wrapper"><table> <thead> <tr> <th>Request</th> <th>Response</th> </tr> </thead> <tbody> <tr> <td>[&lt;SOH&gt;…]&lt;SOH&gt;&lt;0x05&gt;&lt;CRCL&gt;&lt;CRCH&gt;&lt;EOT&gt;</td> <td>[&lt;SOH&gt;…]&lt;SOH&gt;&lt;0x05&gt;&lt;CRCL&gt;&lt;CRCH&gt;&lt;EOT&gt;</td> </tr> </tbody> </table></div> <ul> <li> <p>The Jump to Application command from the PC host application commands the Bootloader to execute the application</p> </li> <li> <p>Once response is sent it exits the firmware upgrade mode and begins executing the application</p> </li> </ul> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../../../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2021 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
